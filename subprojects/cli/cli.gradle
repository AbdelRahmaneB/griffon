import org.apache.tools.ant.filters.ReplaceTokens

apply plugin:'groovy'

configurations{
	compile.transitive = false
	
	// @todo: move to spring dep setup 
	compile.exclude group: 'commons-logging', module: 'commons-logging'
	
	runtime.transitive = false
	testCompile.transitive = false
	testRuntime.transitive = false
}

dependencies{
	groovy "org.codehaus.groovy:groovy-all:$groovyVersion"
	
	compile "org.codehaus.groovy:groovy-all:$groovyVersion",
        	"log4j:log4j:1.2.16",
        	"org.slf4j:slf4j-log4j12:$slf4jVersion",
        	"org.slf4j:slf4j-api:$slf4jVersion",
        	"org.slf4j:jcl-over-slf4j:$slf4jVersion",
        	"org.slf4j:jul-to-slf4j:$slf4jVersion"
	compile	("org.codehaus.gpars:gpars:0.9"){
		exclude group: '*', module: '*'
	}
	compile	"org.coconut.forkjoin:jsr166y:070108",
	        "junit:junit:4.8.1",
	        "asm:asm:3.2",
	        "org.tmatesoft.svnkit:svnkit:1.3.1",
	        "org.apache.ant:ant:$antVersion",
	        "org.apache.ant:ant-antlr:$antVersion",
	        "org.apache.ant:ant-launcher:$antVersion",
	        "org.apache.ant:ant-junit:$antVersion",
	        "org.apache.ant:ant-nodeps:$antVersion",
	        "jline:jline:0.9.94",
	        "org.fusesource.jansi:jansi:1.4",
	        "commons-cli:commons-cli:1.2",
	        "commons-io:commons-io:1.4",
	        "commons-lang:commons-lang:2.5"
	
	compile("org.springframework:org.springframework.core:$springVersion"){
		exclude (group: 'commons-logging', module: 'commons-logging')
	}
	compile("org.springframework:org.springframework.aop:$springVersion",
	        "org.springframework:org.springframework.aspects:$springVersion",
	        "org.springframework:org.springframework.asm:$springVersion",
	        "org.springframework:org.springframework.beans:$springVersion",
	        "org.springframework:org.springframework.context:$springVersion",
	        "org.springframework:org.springframework.context.support:$springVersion",
	        "org.springframework:org.springframework.expression:$springVersion",
	        "org.springframework:org.springframework.instrument:$springVersion")
	compile "org.xhtmlrenderer:core-renderer:R8pre2",
	        "com.lowagie:itext:2.0.8",
	        "radeox:radeox:1.0-b2",
	        "org.grails:grails-docs:1.3.6",
	        "org.apache.ivy:ivy:2.2.0",
			"org.codehaus.gant:gant_groovy1.8:1.9.5",
			
			project(":griffon-rt")
			
	compile('org.codehaus.griffon:swingxbuilder:0.1.8') {
		        exclude module: 'groovy-all'
	}
	
}

/**
* move this task to a common place for groovy projects
*
**/
task groovyDocJar(type:Jar){
	classifier = 'javadoc'
	from (groovydoc.outputs.files)
}

processResources{
	filter(ReplaceTokens, tokens: [version:version, 
								   groovyVersion:groovyVersion,
								   antVersion:antVersion,
								   slf4jVersion:slf4jVersion,
								   springVersion:springVersion])
}

test{
	systemProperty('user.dir', rootProject.file(".").absolutePath)
}