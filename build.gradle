/*
 * Copyright 2010-2011 the original author or authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
apply plugin:'java'

configurations{
	runtime { transitive = false }
	testRuntime { transitive = false }
}

dependencies{
	runtime project(":rt")
	runtime project(":cli")
	runtime project("scripts")
}

subprojects {
	apply plugin:'groovy'
	
	sourceCompatibility = '1.5'
	targetCompatibility = '1.5'
	group = 'org.codehaus.griffon'

	repositories {
	    flatDir(dirs: file('lib/wrapper'))
	    mavenLocal()
	    mavenCentral()
	    mavenRepo name: 'Codehaus', urls: 'http://repository.codehaus.org'
	    mavenRepo name: 'SpringSource', urls: 'http://repository.springsource.com/maven/bundles/release'
	}
	
	dependencies{
		groovy "org.codehaus.groovy:groovy-all:$groovyVersion"
	}
}

task zipMp(type:Zip){
	appendix = "all"
	from 'src/dist'
	into('libs') { 
		from configurations.runtime
	}
}
/*sourceSets {
    scripts {
        compileClasspath = sourceSets.rt.classes + sourceSets.cli.classes + configurations.scripts
        java.srcDirs = []
        groovy.srcDirs = ['src/main/scripts']
        classesDir = "$buildDir/classes/scripts" as File
    }*/
    /*wrapper {
        compileClasspath = configurations.wrapper
        java.srcDirs = ['src/wrapper/java']
        classesDir = "$buildDir/classes/wrapper" as File
    }
    intTest {
        compileClasspath = sourceSets.rt.classes + sourceSets.cli.classes + sourceSets.scripts.classes + configurations.cli + configurations.scripts
        runtimeClasspath = classes + sourceSets.rt.classes + sourceSets.cli.classes + sourceSets.scripts.classes + configurations.cli + configurations.scripts + files(fileTree("$buildDir/libs/griffon-resources-${version}.jar"))
        java.srcDirs = []
        groovy.srcDirs = ['src/test/integration']
    }
}*/

/*
task allClasses(dependsOn: [rtClasses, cliClasses, scriptsClasses]) {
    description = "Compiles all rt, cli and script classes."
}*/


/*
task intTest(type: Test) {
    dependsOn jarResources
    testClassesDir = sourceSets.intTest.classesDir
    classpath = sourceSets.intTest.runtimeClasspath
    testSrcDirs = sourceSets.intTest.groovy.srcDirs as List
}

task allTests(dependsOn: [test, intTest]) {
    description = "Runs all unit and integration tests."
}

task fullDist(dependsOn: [zipGuide, zipBinary, zipSource, tarBinary, tarSource, izpack, deb]) {
    description = "Assembles all packages."
}

task bambooStage1(dependsOn: [clean, test]) {
    description = "Makes a full test run and assembles all packages."
}

task bambooStage2(dependsOn: [bambooStage1, fullDist, rpm]) {
    description = "Makes a full test run and assembles all packages."
}

task wrapper(type: Wrapper) {
    gradleVersion = '0.9.2'
    jarFile = 'gradle/wrapper/gradle-wrapper.jar'
}
*/
